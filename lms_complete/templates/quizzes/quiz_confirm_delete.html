{% extends 'base.html' %}

{% block title %}Delete Quiz - {{ quiz.title }} - EduFlow{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 3rem auto;">
    <div style="background: white; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.1);">
        <!-- Warning Header -->
        <div style="background: linear-gradient(135deg, #ef4444, #dc2626); padding: 2rem; text-align: center; color: white;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">Delete Quiz</h1>
            <p style="opacity: 0.9;">This action cannot be undone</p>
        </div>
        
        <!-- Quiz Info -->
        <div style="padding: 2rem;">
            <div style="background: #fef2f2; border: 1px solid #fee2e2; border-radius: 16px; padding: 1.5rem; margin-bottom: 2rem;">
                <h3 style="font-weight: 600; color: #991b1b; margin-bottom: 1rem;">Quiz to be deleted:</h3>
                
                <div style="margin-bottom: 1rem;">
                    <h2 style="font-size: 1.3rem; font-weight: 700; color: #0f172a; margin-bottom: 0.25rem;">{{ quiz.title }}</h2>
                    <p style="color: #64748b;">{{ quiz.description|default:'No description' }}</p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div>
                        <div style="font-size: 0.8rem; color: #64748b;">Questions</div>
                        <div style="font-weight: 600;">{{ quiz.total_questions }}</div>
                    </div>
                    <div>
                        <div style="font-size: 0.8rem; color: #64748b;">Total Attempts</div>
                        <div style="font-weight: 600;">{{ quiz.attempts.count }}</div>
                    </div>
                </div>
            </div>
            
            <!-- Warning Messages -->
            <div style="margin-bottom: 2rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem; color: #dc2626; margin-bottom: 1rem;">
                    <i class="fas fa-times-circle"></i>
                    <span>This will permanently delete:</span>
                </div>
                
                <ul style="list-style: none; padding: 0; margin-left: 2rem;">
                    <li style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; color: #475569;">
                        <i class="fas fa-angle-right" style="color: #ef4444;"></i>
                        The quiz "{{ quiz.title }}" and all its questions
                    </li>
                    <li style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; color: #475569;">
                        <i class="fas fa-angle-right" style="color: #ef4444;"></i>
                        All {{ quiz.total_questions }} questions in this quiz
                    </li>
                    <li style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 0.75rem; color: #475569;">
                        <i class="fas fa-angle-right" style="color: #ef4444;"></i>
                        All {{ quiz.attempts.count }} student attempts and scores
                    </li>
                </ul>
            </div>
            
            <!-- Confirmation Form -->
            <form method="post">
                {% csrf_token %}
                
                <div style="background: #f8fafc; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                    <label style="display: flex; align-items: center; gap: 0.75rem; cursor: pointer;">
                        <input type="checkbox" name="confirm" id="confirmCheckbox" required 
                               style="width: 18px; height: 18px; cursor: pointer;">
                        <span style="color: #334155; font-weight: 500;">
                            I understand that this action is permanent and cannot be undone
                        </span>
                    </label>
                </div>
                
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" id="deleteBtn" disabled
                            style="flex: 1; background: #ef4444; color: white; padding: 1rem; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; opacity: 0.5;">
                        <i class="fas fa-trash"></i> Yes, Delete Quiz
                    </button>
                    
                    <a href="{% url 'quizzes:manage_quizzes' lesson.id %}" 
                       style="flex: 1; background: white; color: #334155; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 12px; text-align: center; text-decoration: none; font-weight: 600;">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Enable delete button only when checkbox is checked
    const checkbox = document.getElementById('confirmCheckbox');
    const deleteBtn = document.getElementById('deleteBtn');
    
    checkbox.addEventListener('change', function() {
        if (this.checked) {
            deleteBtn.disabled = false;
            deleteBtn.style.opacity = '1';
        } else {
            deleteBtn.disabled = true;
            deleteBtn.style.opacity = '0.5';
        }
    });
</script>
{% endblock %}